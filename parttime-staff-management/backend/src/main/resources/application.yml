spring:
  application:
    name: coffee-management

  datasource:
    url: jdbc:mysql://localhost:3306/coffee_management?useSSL=false&serverTimezone=Asia/Ho_Chi_Minh&allowPublicKeyRetrieval=true
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:123456}
    driver-class-name: com.mysql.cj.jdbc.Driver

  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.MySQLDialect

  # ===============================================
  # CHỌN 1 TRONG 2 CÁCH:
  # ===============================================
  # CÁCH 1: Dùng Flyway (tự động tạo bảng khi chạy backend)
  #   - enabled: true
  #   - Không cần chạy schema.sql, data.sql
  #
  # CÁCH 2: Tạo bảng thủ công trong VS Code
  #   - enabled: false 
  #   - Chạy file database/full_setup.sql trước khi start backend
  # ===============================================
  flyway:
    enabled: true  # Flyway sẽ tự tạo bảng từ migration files
    baseline-on-migrate: true
    locations: classpath:db/migration

server:
  port: 8080

# JWT Configuration
jwt:
  secret: ${JWT_SECRET:mySecretKeyForJWTTokenGenerationThatIsAtLeast256BitsLong123456}
  access-token-expiration: 86400000  # 24 hours in milliseconds
  refresh-token-expiration: 604800000  # 7 days in milliseconds

# CORS Configuration
cors:
  allowed-origins: http://localhost:3000,http://localhost:5173

# Logging
logging:
  level:
    com.coffee.management: DEBUG
    org.springframework.security: DEBUG

# OpenAPI Configuration
springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
    operationsSorter: method
